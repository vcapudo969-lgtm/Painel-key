<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Key System PRO 2025</title>
    <link rel="stylesheet" href="cdnjs.cloudflare.com">
    <style>
        :root {
            --bg: #0d0d0d;
            --card: #1a1a1a;
            --primary: #7209b7;
            --accent: #4cc9f0;
            --text: #ffffff;
            --danger: #f72585;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }

        body { background-color: var(--bg); color: var(--text); overflow: hidden; }

        /* Login & Cadastro */
        #auth-screen {
            height: 100vh; display: flex; align-items: center; justify-content: center;
            background: radial-gradient(circle at center, #240046 0%, #0d0d0d 100%);
        }

        .auth-card {
            background: var(--card); padding: 2rem; border-radius: 15px;
            width: 350px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); border: 1px solid #333;
        }

        .input-group { margin-bottom: 1.5rem; }
        input { 
            width: 100%; padding: 12px; background: #222; border: 1px solid #444; 
            color: #fff; border-radius: 5px; outline: none; margin-top: 5px;
        }

        button {
            width: 100%; padding: 12px; border: none; border-radius: 5px;
            background: var(--primary); color: white; cursor: pointer; font-weight: bold;
            transition: 0.3s;
        }

        button:hover { filter: brightness(1.2); }

        /* Main App Layout */
        #app-screen { display: none; height: 100vh; padding: 20px; }

        .view-section { display: none; animation: fadeIn 0.4s; }
        .view-active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Menu Sanduíche Inferior */
        .menu-container {
            position: fixed; bottom: 20px; right: 20px; z-index: 1000;
        }

        .fab {
            width: 60px; height: 60px; border-radius: 50%; background: var(--primary);
            display: flex; align-items: center; justify-content: center; font-size: 24px;
            cursor: pointer; box-shadow: 0 4px 15px rgba(114, 9, 183, 0.4);
            transition: 0.4s ease;
        }

        .fab.active { transform: rotate(45deg); background: var(--danger); }

        .menu-items {
            position: absolute; bottom: 70px; right: 0; display: none;
            flex-direction: column; gap: 10px; min-width: 200px;
        }

        .menu-item {
            background: var(--card); padding: 15px; border-radius: 10px;
            border: 1px solid #333; cursor: pointer; display: flex; align-items: center; gap: 10px;
            transition: 0.2s; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        .menu-item:hover { background: #252525; border-color: var(--accent); }

        /* Dashboard Styles */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: var(--card); padding: 20px; border-radius: 10px; border-left: 4px solid var(--accent); }
        
        .list-table { width: 100%; border-collapse: collapse; background: var(--card); border-radius: 10px; overflow: hidden; }
        .list-table th, .list-table td { padding: 15px; text-align: left; border-bottom: 1px solid #333; }

        .tag { padding: 4px 8px; border-radius: 4px; font-size: 12px; }
        .tag-key { background: #3a0ca3; }
        .tag-user { background: #4361ee; }

    </style>
</head>
<body>

    <!-- TELA DE LOGIN/CADASTRO -->
    <div id="auth-screen">
        <div class="auth-card">
            <h2 id="auth-title" style="margin-bottom: 1.5rem; text-align: center;">Login Admin</h2>
            <div class="input-group">
                <label>Usuário</label>
                <input type="text" id="auth-user" placeholder="Digite seu user">
            </div>
            <div class="input-group">
                <label>Senha</label>
                <input type="password" id="auth-pass" placeholder="••••••••">
            </div>
            <button onclick="handleAuth()" id="btn-auth">Entrar</button>
            <p style="text-align: center; margin-top: 15px; font-size: 14px; color: #aaa; cursor: pointer;" onclick="toggleAuthMode()" id="toggle-text">
                Não tem conta? Cadastre-se
            </p>
        </div>
    </div>

    <!-- TELA PRINCIPAL DO SISTEMA -->
    <div id="app-screen">
        <header style="margin-bottom: 30px; display: flex; justify-content: space-between; align-items: center;">
            <h1 id="view-title">Dashboard</h1>
            <button onclick="logout()" style="width: auto; padding: 8px 15px; background: #333;">Sair</button>
        </header>

        <!-- Seções do Menu -->
        <div id="section-dashboard" class="view-section view-active">
            <div class="stats-grid">
                <div class="stat-card"><h3>Usuários</h3><p id="stat-users">0</p></div>
                <div class="stat-card"><h3>Keys Ativas</h3><p id="stat-keys">0</p></div>
                <div class="stat-card"><h3>Total Créditos</h3><p id="stat-credits">0</p></div>
            </div>
            <h3>Keys Recentes</h3><br>
            <table class="list-table" id="table-keys">
                <thead><tr><th>Key</th><th>Duração</th><th>Status</th></tr></thead>
                <tbody id="body-keys"></tbody>
            </table>
        </div>

        <div id="section-users" class="view-section">
            <h3>Gerenciar Usuários</h3><br>
            <table class="list-table">
                <thead><tr><th>Nome</th><th>Créditos</th><th>Ações</th></tr></thead>
                <tbody id="body-users"></tbody>
            </table>
        </div>

        <div id="section-add-credits" class="view-section">
            <div class="auth-card" style="width: 100%; max-width: 500px;">
                <h3>Adicionar Créditos</h3><br>
                <select id="select-user-credit" style="width:100%; padding:10px; background:#222; color:white; margin-bottom:10px;"></select>
                <input type="number" id="credit-amount" placeholder="Quantidade de Créditos">
                <button onclick="addCredits()" style="margin-top: 15px;">Confirmar Recarga</button>
            </div>
        </div>

        <div id="section-gen-keys" class="view-section">
            <div class="auth-card" style="width: 100%; max-width: 500px;">
                <h3>Gerador de Key Temporária</h3><br>
                <select id="key-time" style="width:100%; padding:10px; background:#222; color:white;">
                    <option value="1">24 Horas</option>
                    <option value="7">7 Dias</option>
                    <option value="30">30 Dias</option>
                </select>
                <button onclick="generateKey()" style="margin-top: 15px; background: var(--accent);">Gerar Nova Key</button>
                <div id="last-key" style="margin-top: 20px; padding: 10px; background: #000; border-radius: 5px; display: none; text-align: center; font-family: monospace;"></div>
            </div>
        </div>

        <div id="section-profile" class="view-section">
            <div class="auth-card">
                <i class="fas fa-user-circle" style="font-size: 50px; margin-bottom: 10px;"></i>
                <h2 id="prof-name">Nome</h2>
                <p id="prof-role" style="color: var(--accent);">Administrador</p>
                <hr style="margin: 15px 0; border: 0; border-top: 1px solid #333;">
                <p>Status: Ativo</p>
            </div>
        </div>

        <!-- Menu Sanduíche -->
        <div class="menu-container">
            <div class="menu-items" id="menu-box">
                <div class="menu-item" onclick="showSection('dashboard')"><i class="fas fa-chart-line"></i> Dashboard</div>
                <div class="menu-item" onclick="showSection('users')"><i class="fas fa-users"></i> Ver Usuários</div>
                <div class="menu-item" onclick="showSection('add-credits')"><i class="fas fa-dollar-sign"></i> Adicionar Créditos</div>
                <div class="menu-item" onclick="showSection('gen-keys')"><i class="fas fa-key"></i> Gerar Keys</div>
                <div class="menu-item" onclick="showSection('profile')"><i class="fas fa-user"></i> Perfil</div>
            </div>
            <div class="fab" onclick="toggleMenu()"><i class="fas fa-bars"></i></div>
        </div>
    </div>

    <script>
        // Simulação de Banco de Dados
        let db = JSON.parse(localStorage.getItem('sys_data')) || {
            users: [{user: 'admin', pass: '123', credits: 999}],
            keys: []
        };

        let isLoginMode = true;
        let currentUser = null;

        function saveData() { localStorage.setItem('sys_data', JSON.stringify(db)); }

        function toggleAuthMode() {
            isLoginMode = !isLoginMode;
            document.getElementById('auth-title').innerText = isLoginMode ? "Login Admin" : "Cadastro";
            document.getElementById('btn-auth').innerText = isLoginMode ? "Entrar" : "Criar Conta";
            document.getElementById('toggle-text').innerText = isLoginMode ? "Não tem conta? Cadastre-se" : "Já tem conta? Login";
        }

        function handleAuth() {
            const u = document.getElementById('auth-user').value;
            const p = document.getElementById('auth-pass').value;

            if(isLoginMode) {
                const found = db.users.find(x => x.user === u && x.pass === p);
                if(found) {
                    currentUser = found;
                    loginSuccess();
                } else alert("Acesso negado!");
            } else {
                if(db.users.find(x => x.user === u)) return alert("Usuário já existe!");
                db.users.push({user: u, pass: p, credits: 0});
                saveData();
                alert("Cadastrado! Faça login.");
                toggleAuthMode();
            }
        }

        function loginSuccess() {
            document.getElementById('auth-screen').style.display = 'none';
            document.getElementById('app-screen').style.display = 'block';
            document.getElementById('prof-name').innerText = currentUser.user;
            updateDashboard();
            showSection('dashboard');
        }

        function toggleMenu() {
            const menu = document.getElementById('menu-box');
            const fab = document.querySelector('.fab');
            menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
            fab.classList.toggle('active');
        }

        function showSection(id) {
            document.querySelectorAll('.view-section').forEach(s => s.classList.remove('view-active'));
            document.getElementById('section-' + id).classList.add('view-active');
            document.getElementById('view-title').innerText = id.toUpperCase().replace('-', ' ');
            toggleMenu();
            if(id === 'users' || id === 'add-credits') populateUsers();
            if(id === 'dashboard') updateDashboard();
        }

        function generateKey() {
            const time = document.getElementById('key-time').value;
            const key = "KEY-" + Math.random().toString(36).substr(2, 9).toUpperCase();
            db.keys.push({code: key, days: time, date: new Date().toLocaleDateString()});
            saveData();
            
            const res = document.getElementById('last-key');
            res.style.display = 'block';
            res.innerText = `Gerada: ${key}`;
            updateDashboard();
        }

        function populateUsers() {
            const tbody = document.getElementById('body-users');
            const select = document.getElementById('select-user-credit');
            tbody.innerHTML = "";
            select.innerHTML = "";

            db.users.forEach(u => {
                tbody.innerHTML += `<tr><td>${u.user}</td><td>$ ${u.credits}</td><td><button onclick="alert('User ID: ${u.user}')">Gerenciar</button></td></tr>`;
                select.innerHTML += `<option value="${u.user}">${u.user}</option>`;
            });
        }

        function addCredits() {
            const target = document.getElementById('select-user-credit').value;
            const amount = parseInt(document.getElementById('credit-amount').value);
            const user = db.users.find(x => x.user === target);
            if(user && amount > 0) {
                user.credits += amount;
                saveData();
                alert(`Adicionado ${amount} créditos para ${target}`);
            }
        }

        function updateDashboard() {
            document.getElementById('stat-users').innerText = db.users.length;
            document.getElementById('stat-keys').innerText = db.keys.length;
            document.getElementById('stat-credits').innerText = db.users.reduce((a, b) => a + (b.credits || 0), 0);

            const tbody = document.getElementById('body-keys');
            tbody.innerHTML = "";
            db.keys.slice(-5).reverse().forEach(k => {
                tbody.innerHTML += `<tr><td>${k.code}</td><td>${k.days} Dias</td><td><span class="tag tag-key">Ativa</span></td></tr>`;
            });
        }

        function logout() { location.reload(); }
    </script>
</body>
</html>
