<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel 2025</title>
    <link rel="stylesheet" href="cdnjs.cloudflare.com">
    <style>
        :root {
            --bg: #050505;
            --card: #111111;
            --primary: #bc13fe;
            --accent: #00f2ff;
            --text: #ffffff;
            --danger: #ff3b3b;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background-color: var(--bg); color: var(--text); }

        /* Login */
        #auth-screen { height: 100vh; display: flex; align-items: center; justify-content: center; }
        .auth-card { background: var(--card); padding: 30px; border-radius: 15px; width: 350px; border: 1px solid #222; }
        input, select { width: 100%; padding: 12px; margin: 10px 0; background: #1a1a1a; border: 1px solid #333; color: #fff; border-radius: 8px; }
        button { width: 100%; padding: 12px; border: none; border-radius: 8px; background: var(--primary); color: white; font-weight: bold; cursor: pointer; transition: 0.3s; }
        button:hover { opacity: 0.8; }

        /* Dashboard */
        #app-screen { display: none; padding: 20px; }
        .view-section { display: none; }
        .active-view { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Tabela de Gestão de Usuários */
        .admin-table-container { background: var(--card); border-radius: 12px; overflow: hidden; border: 1px solid #222; margin-top: 20px; }
        .user-table { width: 100%; border-collapse: collapse; text-align: left; }
        .user-table th { background: #1a1a1a; padding: 15px; color: var(--accent); font-size: 13px; }
        .user-table td { padding: 15px; border-bottom: 1px solid #222; font-size: 14px; }
        .badge { padding: 4px 8px; border-radius: 4px; font-size: 10px; font-weight: bold; }
        .badge-adm { background: var(--accent); color: #000; }
        .badge-user { background: #333; color: #ccc; }

        /* Menu Sanduíche Inferior */
        .menu-wrapper { position: fixed; bottom: 25px; right: 25px; z-index: 1000; }
        .fab { width: 60px; height: 60px; background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; box-shadow: 0 5px 15px rgba(188, 19, 254, 0.4); }
        .menu-items { position: absolute; bottom: 75px; right: 0; display: none; flex-direction: column; gap: 10px; min-width: 200px; }
        .menu-item { background: #1a1a1a; padding: 15px; border-radius: 10px; border: 1px solid #333; cursor: pointer; display: flex; align-items: center; gap: 12px; transition: 0.2s; }
        .menu-item:hover { background: #222; border-color: var(--primary); }

        .btn-del { background: var(--danger); padding: 5px 10px; border-radius: 5px; font-size: 12px; cursor: pointer; border: none; color: white; }
    </style>
</head>
<body>

    <!-- TELA DE ACESSO -->
    <div id="auth-screen">
        <div class="auth-card">
            <h2 id="auth-title" style="text-align: center; margin-bottom: 20px;">Painel de Acesso</h2>
            <input type="text" id="user" placeholder="Usuário">
            <input type="password" id="pass" placeholder="Senha">
            <button onclick="login()">Entrar</button>
            <p onclick="registrar()" style="text-align: center; font-size: 12px; margin-top: 15px; cursor: pointer; color: #777;">Criar Conta de Usuário</p>
        </div>
    </div>

    <!-- TELA DO APP -->
    <div id="app-screen">
        <h1 id="screen-title">Dashboard</h1>
        <hr style="border: 0; border-top: 1px solid #222; margin: 20px 0;">

        <!-- Seção: Gerenciar Usuários (ADM ONLY) -->
        <div id="view-users" class="view-section">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <h3>Controle de Membros</h3>
                <span id="total-users-count" style="color: var(--accent);">0 usuários</span>
            </div>
            <div class="admin-table-container">
                <table class="user-table">
                    <thead>
                        <tr>
                            <th>USUÁRIO</th>
                            <th>CARGO</th>
                            <th>CRÉDITOS</th>
                            <th>AÇÃO</th>
                        </tr>
                    </thead>
                    <tbody id="user-list-body">
                        <!-- Gerado por JS -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Seção: Dashboard -->
        <div id="view-dash" class="view-section active-view">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div style="background: var(--card); padding: 20px; border-radius: 12px;">
                    <p style="color: #666;">Meu Saldo</p>
                    <h2 id="my-credits">$ 0</h2>
                </div>
                <div style="background: var(--card); padding: 20px; border-radius: 12px;">
                    <p style="color: #666;">Keys Ativas</p>
                    <h2 id="keys-count">0</h2>
                </div>
            </div>
        </div>

        <!-- Seção: Gerar Keys -->
        <div id="view-keys" class="view-section">
            <div class="auth-card" style="width: 100%;">
                <h3>Gerador de Keys</h3>
                <select id="key-days">
                    <option value="1">24 Horas</option>
                    <option value="7">7 Dias</option>
                    <option value="30">30 Dias</option>
                </select>
                <button onclick="gerarKey()">Gerar Agora</button>
                <div id="key-display" style="margin-top: 15px; font-family: monospace; color: var(--accent); text-align: center; font-size: 18px;"></div>
            </div>
        </div>

        <!-- Menu Sanduíche -->
        <div class="menu-wrapper">
            <div class="menu-items" id="main-menu">
                <div class="menu-item" onclick="changeView('dash')"><i class="fas fa-home"></i> Início</div>
                <div class="menu-item adm-only" onclick="changeView('users')"><i class="fas fa-users-cog"></i> Gerenciar Usuários</div>
                <div class="menu-item" onclick="changeView('keys')"><i class="fas fa-key"></i> Gerar Keys</div>
                <div class="menu-item" onclick="location.reload()" style="color: var(--danger);"><i class="fas fa-sign-out-alt"></i> Sair</div>
            </div>
            <div class="fab" onclick="toggleMenu()"><i class="fas fa-bars"></i></div>
        </div>
    </div>

    <script>
        // Inicialização do "Banco de Dados" no navegador
        if (!localStorage.getItem('db_system')) {
            const initialData = {
                users: [{ user: 'admin', pass: 'admin', role: 'ADM', credits: 999 }],
                keys: []
            };
            localStorage.setItem('db_system', JSON.stringify(initialData));
        }

        let db = JSON.parse(localStorage.getItem('db_system'));
        let loggedUser = null;

        function login() {
            const u = document.getElementById('user').value;
            const p = document.getElementById('pass').value;
            const userFound = db.users.find(x => x.user === u && x.pass === p);

            if (userFound) {
                loggedUser = userFound;
                document.getElementById('auth-screen').style.display = 'none';
                document.getElementById('app-screen').style.display = 'block';
                setupUI();
            } else {
                alert("Usuário ou senha incorretos!");
            }
        }

        function registrar() {
            const u = document.getElementById('user').value;
            const p = document.getElementById('pass').value;
            if(!u || !p) return alert("Preencha os campos!");
            if(db.users.find(x => x.user === u)) return alert("Usuário já existe!");

            db.users.push({ user: u, pass: p, role: 'USER', credits: 0 });
            localStorage.setItem('db_system', JSON.stringify(db));
            alert("Conta criada! Agora clique em Entrar.");
        }

        function setupUI() {
            // Esconde opções de ADM se for usuário comum
            if (loggedUser.role !== 'ADM') {
                document.querySelectorAll('.adm-only').forEach(el => el.style.display = 'none');
            }
            document.getElementById('my-credits').innerText = `$ ${loggedUser.credits}`;
            document.getElementById('keys-count').innerText = db.keys.length;
            renderUserList();
        }

        function renderUserList() {
            const listBody = document.getElementById('user-list-body');
            const countEl = document.getElementById('total-users-count');
            listBody.innerHTML = "";
            
            db.users.forEach((u, index) => {
                listBody.innerHTML += `
                    <tr>
                        <td>${u.user}</td>
                        <td><span class="badge ${u.role === 'ADM' ? 'badge-adm' : 'badge-user'}">${u.role}</span></td>
                        <td>$ ${u.credits}</td>
                        <td>
                            ${u.role !== 'ADM' ? `<button class="btn-del" onclick="deleteUser(${index})">Remover</button>` : '---'}
                        </td>
                    </tr>
                `;
            });
            countEl.innerText = `${db.users.length} usuários cadastrados`;
        }

        function deleteUser(index) {
            if(confirm("Deseja deletar este usuário permanentemente?")) {
                db.users.splice(index, 1);
                localStorage.setItem('db_system', JSON.stringify(db));
                renderUserList();
            }
        }

        function changeView(viewId) {
            document.querySelectorAll('.view-section').forEach(v => v.classList.remove('active-view'));
            document.getElementById('view-' + viewId).classList.add('active-view');
            document.getElementById('screen-title').innerText = viewId.toUpperCase();
            toggleMenu();
        }

        function toggleMenu() {
            const menu = document.getElementById('main-menu');
            menu.style.display = (menu.style.display === 'flex') ? 'none' : 'flex';
        }

        function gerarKey() {
            const days = document.getElementById('key-days').value;
            const code = "KEY-" + Math.random().toString(36).substr(2, 9).toUpperCase();
            db.keys.push({ code, days });
            localStorage.setItem('db_system', JSON.stringify(db));
            document.getElementById('key-display').innerText = code;
            document.getElementById('keys-count').innerText = db.keys.length;
        }
    </script>
</body>
</html>
