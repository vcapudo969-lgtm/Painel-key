<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Painel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  background:#020617;
  color:white;
  font-family:Arial;
  padding:20px;
}
.card{
  background:#020617;
  padding:20px;
  border-radius:12px;
  box-shadow:0 0 15px black;
  max-width:400px;
  margin:auto;
}
h2{
  text-align:center;
}
.info{
  margin:10px 0;
  font-size:16px;
}
button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:8px;
  font-weight:bold;
  cursor:pointer;
}
.gerar{
  background:#22c55e;
}
.sair{
  background:#ef4444;
}
.keys{
  margin-top:15px;
  background:#020617;
  padding:10px;
  border-radius:8px;
  font-size:14px;
}
</style>
</head>
<body>

<div class="card">
  <h2>ðŸ‘¤ Painel do UsuÃ¡rio</h2>

  <div class="info" id="nome"></div>
  <div class="info" id="email"></div>
  <div class="info" id="creditos"></div>

  <button class="gerar" onclick="gerarKey()">
    ðŸ”‘ Gerar Key ( -1 crÃ©dito )
  </button>

  <div class="keys" id="listaKeys">
    <b>Keys geradas:</b><br>
  </div>

  <button class="sair" onclick="sair()">Sair</button>
</div>

<script>
// VerificaÃ§Ã£o de login
let emailLogado = localStorage.getItem("logado");
let users = JSON.parse(localStorage.getItem("users")) || {};

if(!emailLogado || !users[emailLogado]){
  window.location.href = "index.html";
}

// Inicializar dados
let user = users[emailLogado];
user.keys = user.keys || [];

function atualizar(){
  document.getElementById("nome").innerText = "Nome: " + user.nome;
  document.getElementById("email").innerText = "Email: " + emailLogado;
  document.getElementById("creditos").innerText = "CrÃ©ditos: " + user.creditos;

  let lista = "<b>Keys geradas:</b><br>";
  if(user.keys.length === 0){
    lista += "Nenhuma key ainda";
  } else {
    user.keys.forEach(k => {
      lista += k + "<br>";
    });
  }
  document.getElementById("listaKeys").innerHTML = lista;

  users[emailLogado] = user;
  localStorage.setItem("users", JSON.stringify(users));
}

function gerarKey(){
  if(user.creditos <= 0){
    alert("VocÃª nÃ£o tem crÃ©ditos suficientes");
    return;
  }

  let novaKey = "KEY-" + Math.random().toString(36).substr(2,8).toUpperCase();
  user.keys.push(novaKey);
  user.creditos -= 1;
  atualizar();
}

function sair(){
  localStorage.removeItem("logado");
  window.location.href = "index.html";
}

atualizar();
</script>

</body>
</html>
